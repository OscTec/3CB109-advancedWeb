<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
      //Using Bootstrap 4 for the CSS
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>//jQuery library
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>//ajax library
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>//Bootstrap 4 library
      <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
      <script>
         //Server web address
            var url = "http://cs2s.yorkdc.net"
            //Server port number
            var port = ":5011"
            //Combining Address and port number with / to create first part of API request
            var server = url + port + "/"

            document.title = "Stat Master"//Changes the Title that appears in the tab




            //Code to send CoD stats to server and have them inputted in MySQL DB
            function sendCoDStats() {
              //Getting values from input field
              var playerID = document.getElementById("sendCoDPlayerID").value
              var mapID = document.getElementById("sendCoDMapID").value
              var gameModeID = document.getElementById("sendCoDGameModeID").value
              var kills = document.getElementById("sendCoDKills").value
              var deaths = document.getElementById("sendCoDDeaths").value
              var assists = document.getElementById("sendCoDAssists").value
              var accuracy = document.getElementById("sendCoDAccuracy").value
              //Verify that all inputs have values
              if(playerID == "" || mapID == "" || gameModeID == "" || kills == "" || deaths == "" || assists == "" || accuracy == ""){
                document.getElementById("SubmitCoDResult").innerHTML = "Please enter values";
              } else {
                //jQuery the server with all the values from the form
                $.get(server + "sendCoD/" + playerID + "/" + mapID + "/" + gameModeID + "/" + kills + "/" + deaths + "/" + assists + "/" + accuracy, function(data, status){
                  //Checks if the request worked
                  if (status == "success") {
                    //This will display a message from the server. Will be Success or Invalid ID
                    document.getElementById("SubmitCoDResult").innerHTML = data;
                  } else {
                    //This is displayed only with a connection to server fault
                    document.getElementById("SubmitCoDResult").innerHTML = "Fail to contact server";
                  }
                })
              }


            }

            //Delete from CoD using EntryID and AuthCode
            //Uses POST due to there being a authorisation code needed
            function delCoDEntry() {
              var EntryID = document.getElementById("sendCoDEntryID").value
              var AuthCode = document.getElementById("sendCoDAuthCode").value
              //Checks inputs are present
              if(EntryID == "" || AuthCode == ""){
                document.getElementById("DelCoDResult").innerHTML = "Please enter values";
              } else {
                $.post(server + "delCoD/" + EntryID + "/" + AuthCode, function(data, status){
                  if(status == "success") {
                    //This will display a message from the server. Will be deleted entry or Invalid ID
                    document.getElementById("DelCoDResult").innerHTML = data;
                  } else {
                    //This is displayed only with a connection to server fault
                    document.getElementById("DelCoDResult").innerHTML = "Fail to contact server";
                  }
                })
              }
            }

            //Used to find CoD games for all players or just one player
            function getCoDStatsByID() {
            var playerID = document.getElementById("getByCoDPlayerID").value;
            var Parent = document.getElementById("statsTableCoD");
            //Removes all old results from table
            while(Parent.hasChildNodes())
            {
              Parent.removeChild(Parent.firstChild);
            }
            //This returns all games
            if(playerID == ""){
              $.get(server + "getCoD", function(data, status){
                //The result the server returns when there are no results
                if(data == "No results found") {
                  //Updates the response text with servers response
                  document.getElementById("FindCoDResult").innerHTML = data;
                } else {
                  for (i = 0; i < data.results.length; i++) {
                    var eID = data.results[i].entryID;
                    var pID = data.results[i].playerID;
                    var mID = data.results[i].mapID;
                    var gID = data.results[i].gameModeID;
                    var kills = data.results[i].kills;
                    var deaths = data.results[i].deaths;
                    var assists = data.results[i].assists;
                    var accuracy = data.results[i].accuracy;
                    //Send values to method to add rows to the stat table
                    addCoDRow(eID, pID, mID, gID, kills, deaths, assists, accuracy);
                  }
                }

              })
            //This returns games for just one player
            } else {
              $.get(server + "getCoD/" + playerID, function(data, status){
                //The result the server returns when there are no results
                if(data == "No results found") {
                  document.getElementById("FindCoDResult").innerHTML = data;
                } else {
                for (i = 0; i < data.results.length; i++) {
                  var eID = data.results[i].entryID;
                  var pID = data.results[i].playerID;
                  var mID = data.results[i].mapID;
                  var gID = data.results[i].gameModeID;
                  var kills = data.results[i].kills;
                  var deaths = data.results[i].deaths;
                  var assists = data.results[i].assists;
                  var accuracy = data.results[i].accuracy;
                  //Send values to method to add rows to the stat table
                  addCoDRow(eID, pID, mID, gID, kills, deaths, assists, accuracy);
                }
              }
              })
            }
          }

            //Used to add rows to CoD table
            function addCoDRow(eID, pID, mID, gID, kill, death, assist, acc) {
              var table = document.getElementById("statsTableCoD");
              var row = table.insertRow(-1);
              var cell0 = row.insertCell(0);
              var cell1 = row.insertCell(1);
              var cell2 = row.insertCell(2);
              var cell3 = row.insertCell(3);
              var cell4 = row.insertCell(4);
              var cell5 = row.insertCell(5);
              var cell6 = row.insertCell(6);
              var cell7 = row.insertCell(7);

              cell0.innerHTML = eID;
              cell1.innerHTML = pID;
              cell2.innerHTML = mID;
              cell3.innerHTML = gID;
              cell4.innerHTML = kill;
              cell5.innerHTML = death;
              cell6.innerHTML = assist;
              cell7.innerHTML = acc;
            }

            //Gets values from compare CoD stats and calls methods to get 2 different players stats
            function compareCoDStats() {
            var p1ID = document.getElementById("getCoDP1").value;
            var p2ID = document.getElementById("getCoDP2").value;
            var gameMode = document.getElementById("getCoDGameMode").value;
            if(p1ID == "" || p2ID == "") {
              document.getElementById("ComCoDResult").innerHTML = "Please enter values";
              } else {
              getCoDAvgStats(p1ID, p2ID, gameMode);
              //getCoDAvgStats(p2ID, gameMode);
              }

            }

            //Adds a row to the comparison table
            function addComCoDRow(pID, pKills, pDeaths, pAssists, pAccuracy) {
              var table = document.getElementById("comTableCoD");

              var row = table.insertRow(-1);
              var cell0 = row.insertCell(0);
              var cell1 = row.insertCell(1);
              var cell2 = row.insertCell(2);
              var cell3 = row.insertCell(3);
              var cell4 = row.insertCell(4);

              cell0.innerHTML = pID;
              cell1.innerHTML = pKills;
              cell2.innerHTML = pDeaths;
              cell3.innerHTML = pAssists;
              cell4.innerHTML = pAccuracy;
            }

            //Gets stats for a player and averages
            function getCoDAvgStats(playerID, playerID1, gameMode) {
              var pCounter = 0;
              var pKills = 0;
              var pDeaths = 0;
              var pAssists = 0;
              var pAccuracy = 0;

              var p1Counter = 0;
              var p1Kills = 0;
              var p1Deaths = 0;
              var p1Assists = 0;
              var p1Accuracy = 0;
              //Uses this if no gamemode is selected
              if(gameMode == "Select Gamemode"){
                $.get(server + "getCoD/" + playerID, function(data, status){
                  //If the server found no results it will do display No results found
                  if(data == "No results found"){
                    document.getElementById("ComCoDResult").innerHTML = data;
                  } else {
                  for (i = 0; i < data.results.length; i++) {
                    pKills += parseInt(data.results[i].kills);
                    pDeaths += parseInt(data.results[i].deaths);
                    pAssists += parseInt(data.results[i].assists);
                    pAccuracy += parseInt(data.results[i].accuracy);
                    pCounter++;
                  }
                  //Calls method that adds row
                  addComCoDRow(playerID, pKills/pCounter, pDeaths/pCounter, pAssists/pCounter, pAccuracy/pCounter)
                  $.get(server + "getCoD/" + playerID1, function(data, status){
                    //If the server found no results it will do display No results found
                    if(data == "No results found"){
                      document.getElementById("ComCoDResult").innerHTML = data;
                    } else {
                    for (i = 0; i < data.results.length; i++) {
                      p1Kills += parseInt(data.results[i].kills);
                      p1Deaths += parseInt(data.results[i].deaths);
                      p1Assists += parseInt(data.results[i].assists);
                      p1Accuracy += parseInt(data.results[i].accuracy);
                      p1Counter++;
                    }
                    //Calls method that adds row
                    addComCoDRow(playerID1, p1Kills/p1Counter, p1Deaths/p1Counter, p1Assists/p1Counter, p1Accuracy/p1Counter)
                  }
                  })
                }
                })
              } else {
                //Uses this if a game mode is selected
                $.get(server + "getCoD/" + playerID + "/" + gameMode, function(data, status){
                  //If the server found no results it will display No results found
                  if(data == "No results found"){
                    document.getElementById("ComCoDResult").innerHTML = data;
                  } else {
                    for (i = 0; i < data.results.length; i++) {
                      pKills += parseInt(data.results[i].kills);
                      pDeaths += parseInt(data.results[i].deaths);
                      pAssists += parseInt(data.results[i].assists);
                      pAccuracy += parseInt(data.results[i].accuracy);
                      pCounter++;
                    }
                    addComCoDRow(playerID, pKills/pCounter, pDeaths/pCounter, pAssists/pCounter, pAccuracy/pCounter)
                    $.get(server + "getCoD/" + playerID1 + "/" + gameMode, function(data, status){
                      //If the server found no results it will display No results found
                      if(data == "No results found"){
                        document.getElementById("ComCoDResult").innerHTML = data;
                      } else {
                        for (i = 0; i < data.results.length; i++) {
                          p1Kills += parseInt(data.results[i].kills);
                          p1Deaths += parseInt(data.results[i].deaths);
                          p1Assists += parseInt(data.results[i].assists);
                          p1Accuracy += parseInt(data.results[i].accuracy);
                          p1Counter++;
                        }
                        addComCoDRow(playerID1, p1Kills/p1Counter, p1Deaths/p1Counter, p1Assists/p1Counter, p1Accuracy/p1Counter)
                      }
                    })
                  }
                })
              }
            }


            //Takes stats from submit field
            //Sends them to the server to be stored
            function sendD2Stats() {
              var playerID = document.getElementById("sendD2PlayerID").value
              var mapID = document.getElementById("sendD2MapID").value
              var MotesDeposited = document.getElementById("sendMotesDeposited").value
              var HostilesDefeated = document.getElementById("sendHostilesDefeated").value
              var Guardiansdefeated = document.getElementById("sendGuardiansDefeated").value
              var MotesLost = document.getElementById("sendMotesLost").value
              var PrimevalHealed = document.getElementById("sendPrimevalHealed").value
              //Checks that all fields are filled
              if(playerID == "" || mapID == "" || MotesDeposited == "" || HostilesDefeated == "" || Guardiansdefeated == "" || MotesLost == "" || PrimevalHealed == ""){
                document.getElementById("SubmitD2Result").innerHTML = "Please enter values";
              } else {
                $.get(server + "sendD2/" + playerID + "/" + mapID + "/" + MotesDeposited + "/" + HostilesDefeated + "/" + Guardiansdefeated + "/" + MotesLost + "/" + PrimevalHealed, function(data, status){
                  //Changes text depending on if it succeeded or not
                  if(status == "success") {
                    document.getElementById("SubmitD2Result").innerHTML = data;
                  } else {
                    document.getElementById("SubmitD2Result").innerHTML = "Failed to contact server";
                  }
                })
              }
            }

            //Takes values from Destiny 2 delete fields
            //Uses those values to call server to delete from the database
            function delD2Entry() {
              var EntryID = document.getElementById("sendD2EntryID").value
              var AuthCode = document.getElementById("sendD2AuthCode").value
              //Checks that all fields are filled
              if(EntryID == "" || AuthCode == ""){
                document.getElementById("DelD2Result").innerHTML = "Please enter values";
              } else {
                $.post(server + "delD2/" + EntryID + "/" + AuthCode, function(data, status){
                  //Displays message depending on if it was successful
                  if(status == "success") {
                    document.getElementById("D2delText").innerHTML = data;
                  } else {
                    document.getElementById("D2delText").innerHTML = "Failed to contact server";
                  }
                })
              }

            }


            function getD2StatsByID() {
            var playerID = document.getElementById("getByD2PlayerID").value;
            var Parent = document.getElementById("statsTableD2");
            while(Parent.hasChildNodes())
            {
              Parent.removeChild(Parent.firstChild);
            }
            if(playerID == ""){
              $.get(server + "getD2", function(data, status){
                if(data == "No results found") {
                  document.getElementById("FindD2Result").innerHTML = data;
                } else {
                  for (i = 0; i < data.results.length; i++) {
                    var eID = data.results[i].EntryID;
                    var pID = data.results[i].playerID;
                    var mID = data.results[i].mapID;
                    var mDepo = data.results[i].MotesDeposited;
                    var hosDe = data.results[i].HostilesDefeated;
                    var guardDe = data.results[i].GuardiansDefeated;
                    var mLost = data.results[i].MotesLost;
                    var priHeal = data.results[i].PrimevalHealed;
                    addD2Row(eID, pID, mID, mDepo, hosDe, guardDe, mLost, priHeal);
                  }
                }

              })
            } else {
              $.get(server + "getD2/" + playerID, function(data, status){
                if(data == "No results found") {
                  document.getElementById("FindD2Result").innerHTML = data;
                } else {
                for (i = 0; i < data.results.length; i++) {
                  var eID = data.results[i].EntryID;
                  var pID = data.results[i].playerID;
                  var mID = data.results[i].mapID;
                  var mDepo = data.results[i].MotesDeposited;
                  var hosDe = data.results[i].HostilesDefeated;
                  var guardDe = data.results[i].GuardiansDefeated;
                  var mLost = data.results[i].MotesLost;
                  var priHeal = data.results[i].PrimevalHealed;
                  addD2Row(eID, pID, mID, mDepo, hosDe, guardDe, mLost, priHeal);
                }
              }
              })
            }

          }


            function addD2Row(eID, pID, mID, mDepo, hosDe, guardDe, mLost, priHeal) {
              var table = document.getElementById("statsTableD2");
              var row = table.insertRow(-1);
              var cell0 = row.insertCell(0);
              var cell1 = row.insertCell(1);
              var cell2 = row.insertCell(2);
              var cell3 = row.insertCell(3);
              var cell4 = row.insertCell(4);
              var cell5 = row.insertCell(5);
              var cell6 = row.insertCell(6);
              var cell7 = row.insertCell(7);

              cell0.innerHTML = eID;
              cell1.innerHTML = pID;
              cell2.innerHTML = mID;
              cell3.innerHTML = mDepo;
              cell4.innerHTML = hosDe;
              cell5.innerHTML = guardDe;
              cell6.innerHTML = mLost;
              cell7.innerHTML = priHeal;
            }

            function compareD2Stats() {
            var p1ID = document.getElementById("getD2P1").value;
            var p2ID = document.getElementById("getD2P2").value;
            //Checks for empty values
            if(p1ID == "" || p2ID == "") {
              //Displays message asking user to input values
              document.getElementById("ComD2Result").innerHTML = "Please enter values";
              } else {
                getD2AvgStats(p1ID, p2ID);
                //getD2AvgStats(p2ID);
              }
            }

            function addComD2Row(pID, mDepo, hosDe, guardDe, mLost, priHeal) {
              var table = document.getElementById("comTableD2");
              var row = table.insertRow(-1);
              var cell0 = row.insertCell(0);
              var cell1 = row.insertCell(1);
              var cell2 = row.insertCell(2);
              var cell3 = row.insertCell(3);
              var cell4 = row.insertCell(4);
              var cell5 = row.insertCell(4);

              cell0.innerHTML = pID;
              cell1.innerHTML = mDepo;
              cell2.innerHTML = hosDe;
              cell3.innerHTML = guardDe;
              cell4.innerHTML = mLost;
              cell5.innerHTML = priHeal;
            }

            function getD2AvgStats(playerID, playerID1) {
              var pCounter = 0;
              var pMotesDeposited = 0;
              var pHostilesDefeated = 0;
              var pGuardiansDefeated = 0;
              var pMotesLost = 0;
              var pPrimevalHealed = 0;

              var p1Counter = 0;
              var p1MotesDeposited = 0;
              var p1HostilesDefeated = 0;
              var p1GuardiansDefeated = 0;
              var p1MotesLost = 0;
              var p1PrimevalHealed = 0;

              $.get(server + "getD2/" + playerID, function(pData, status){
                if(pData == "No results found"){
                  document.getElementById("ComD2Result").innerHTML = pData;
                } else {
                //pData = JSON.parse(data);
                for (i = 0; i < pData.results.length; i++) {
                  pMotesDeposited += parseInt(pData.results[i].MotesDeposited);
                  pHostilesDefeated += parseInt(pData.results[i].HostilesDefeated);
                  pGuardiansDefeated += parseInt(pData.results[i].GuardiansDefeated);
                  pMotesLost += parseInt(pData.results[i].MotesLost);
                  pPrimevalHealed += parseInt(pData.results[i].PrimevalHealed);
                  pCounter++;
                }
                addComD2Row(playerID, pMotesDeposited/pCounter, pHostilesDefeated/pCounter, pGuardiansDefeated/pCounter, pMotesLost/pCounter, pPrimevalHealed/pCounter)
                $.get(server + "getD2/" + playerID1, function(pData, status){
                  if(pData == "No results found"){
                    document.getElementById("ComD2Result").innerHTML = pData;
                  } else {
                  //pData = JSON.parse(data);
                  for (i = 0; i < pData.results.length; i++) {
                    p1MotesDeposited += parseInt(pData.results[i].MotesDeposited);
                    p1HostilesDefeated += parseInt(pData.results[i].HostilesDefeated);
                    p1GuardiansDefeated += parseInt(pData.results[i].GuardiansDefeated);
                    p1MotesLost += parseInt(pData.results[i].MotesLost);
                    p1PrimevalHealed += parseInt(pData.results[i].PrimevalHealed);
                    p1Counter++;
                  }
                  addComD2Row(playerID1, p1MotesDeposited/p1Counter, p1HostilesDefeated/p1Counter, p1GuardiansDefeated/p1Counter, p1MotesLost/p1Counter, p1PrimevalHealed/p1Counter)
                }
                })
              }
              })
              }


              //Takes two steam IDs and finds games both users have
              //This querys the server which querys the Steam API
            function compareGames() {
              var SteamID1 = document.getElementById("getFGP1").value;
              var SteamID2 = document.getElementById("getFGP2").value;
              var ID1Games;
              var ID2Games;
              var Parent = document.getElementById("matchGameTable");
              while(Parent.hasChildNodes())
              {
                Parent.removeChild(Parent.firstChild);
              }

              //idtest = pData.response.games[0].appid;
              if(SteamID1 == "" || SteamID2 == "") {
                document.getElementById("CompareSteam").innerHTML = "Please enter two IDs";
              }

              $.get(server + "getSteamGames/" + SteamID1, function(data, status){
                if(data == "Invalid Steam ID" || data == "Steam ID is incorrect length") {
                  document.getElementById("CompareSteam").innerHTML = data;
                } else {
                  var pData = JSON.parse(data);
                  ID1Games = pData;
                  //console.log(ID1Games);
                  $.get(server + "getSteamGames/" + SteamID2, function(data, status){
                    if(data == "Invalid Steam ID" || data == "Steam ID is incorrect length") {
                      document.getElementById("CompareSteam").innerHTML = data;
                    } else {
                      var pData = JSON.parse(data);
                      ID2Games = pData;
                      //console.log(ID2Games.response.games.length);
                      console.log(compareArrays(ID1Games, ID2Games));
                    }

                  });
                }

              });
            }



            //Compares two lists of games passed into it
            function compareArrays(ID1Games, ID2Games) {
              var matchedGames = [];
              for (i = 0; i < ID1Games.response.games.length; i++) {
                var gameID1 = ID1Games.response.games[i].appid;
                //console.log(gameID1);
                for (j = 0; j < ID2Games.response.games.length; j++) {
                  var gameID2 = ID2Games.response.games[j].appid;
                  //console.log(gameID2);
                  if(gameID1 == gameID2) {
                    matchedGames.push(gameID1);
                    //addMatchGames(gameID1);
                    findGameName(gameID1);
                  }
                }
              }
              return matchedGames;
            }

            //Querys the server which wuerys the Steam API to get the description of a game
            //It then selects the Steam game name from the JSON object
            function findGameName(gameID) {
              $.get(server + "getSteamGameDes/" + gameID, function(data, status){
                var pData = JSON.parse(data);
                if(pData.game.gameName == null) { //Strips out all null results from games that don't exist anymore
                  console.log(pData);

                } else if(/ValveTestApp/.test(pData.game.gameName)) { //Strips out all results starting with ValueTestApp

                } else if(pData.game.gameName == "") {

                }
                else {
                  addMatchGame(pData.game.gameName);
                }

              });
            }
            //Adds a game to the table
            function addMatchGame(gameName) {
                var table = document.getElementById("matchGameTable");
                var row = table.insertRow(-1);
                var cell0 = row.insertCell(0);
                cell0.innerHTML = gameName;
            }

            //Returns a list of games belonging to a SteamID
            function findGames(SteamID){
              $.get(server + "getSteamGames/" + SteamID, function(data, status){
                //console.log(data);
                return data;
              });
            };

            //Takes a steamID from a input field and updates a table with all that IDs friends
            function findFriends(){
              var steamID = document.getElementById("getSteamID").value;
              var Parent = document.getElementById("friendsTable");
              while(Parent.hasChildNodes())
              {
                Parent.removeChild(Parent.firstChild);
              }
              $.get(server + "getSteamFriends/" + steamID, function(data, status){
                if(data == "Invalid Steam ID" || data == "Steam ID is incorrect length") {
                  document.getElementById("FriendsSteam").innerHTML = data;
                } else {
                  var pData = JSON.parse(data);
                  console.log(pData.friendslist.friends[0]);
                  for (i = 0; i < pData.friendslist.friends.length; i++) {
                    $.get(server + "getSteamProfile/" + pData.friendslist.friends[i].steamid, function(data, status){
                      var aData = JSON.parse(data);
                      addFriendRow(aData.response.players[0].personaname, aData.response.players[0].steamid);
                    });
                  }
                }

              });
            }

            //Adds a row to friends table with the Steam name and Steam ID
            function addFriendRow(steamName, steamID) {
              var table = document.getElementById("friendsTable");
              var row = table.insertRow(-1);
              var cell0 = row.insertCell(0);
              var cell1 = row.insertCell(1);

              cell0.innerHTML = steamName;
              cell1.innerHTML = steamID;

            }

            //Pages
            var activePage;//The current active div

            function setPages() {
              var D2Page = document.getElementById("D2Stats");
              var CoDPage = document.getElementById("CoDStats");
            }

            //Hides all divs apart from the home div
            function getHomePage() {
              var CoDPage = document.getElementById("HomePage");
              if (CoDPage.style.display === "none") {
                activePage.style.display = "none";
                activePage = document.getElementById("HomePage");
                CoDPage.style.display = "block";
              } else {
                CoDPage.style.display = "none";
              }
            }

            //Hides all divs apart from the CoD div
            function getCoDPage() {
              var CoDPage = document.getElementById("CoDStats");
              if (CoDPage.style.display === "none") {
                activePage.style.display = "none";
                activePage = document.getElementById("CoDStats");
                CoDPage.style.display = "block";
              } else {
                CoDPage.style.display = "none";
              }
            }

            //Hides all divs apart from the D2 div
            function getD2Page() {
             var D2Page = document.getElementById("D2Stats");
              if (D2Page.style.display === "none") {
                activePage.style.display = "none";
                activePage = document.getElementById("D2Stats");
                D2Page.style.display = "block";
              } else {
                D2Page.style.display = "none";
              }
            }

            //Hides all divs apart from the find games div
            function getFindGamePage() {
             var FindGamePage = document.getElementById("FindGamePage");
              if (FindGamePage.style.display === "none") {
                activePage.style.display = "none";
                activePage = document.getElementById("FindGamePage");
                FindGamePage.style.display = "block";
              } else {
                FindGamePage.style.display = "none";
              }
            }

            //Used to hide the divs at the on page load
            function hide() {
              var D2Page = document.getElementById("D2Stats");
              D2Page.style.display = "none";
              var CoDPage = document.getElementById("CoDStats");
              CoDPage.style.display = "none";
              var FingGamePage = document.getElementById("FindGamePage");
              FingGamePage.style.display = "none";
              activePage = document.getElementById("HomePage");

            }


      </script>
      <!--CSS to hide the different all divs but the main menu-->
      <style>
         #CoDStats { display: none;}
         #D2Stats { display: none;}
         #FindGamePage { display: none;}
      </style>
   </head>
   <body onload="hide()" class="bg-info text-white">
      <!-- Hides all divs on page load -->
      <div id="StatsPages">
         <!-- Nav Bar -->
         <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top justify-content-center">
            <ul class="navbar-nav">
               <li class="nav-item">
                  <a class="nav-link" onclick="getHomePage()">Home</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" onclick="getCoDPage()">CoD BLOPS 4</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" onclick="getD2Page()">Destiny 2</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" onclick="getFindGamePage()">Find Game</a>
               </li>
            </ul>
         </nav>
         <p>  <br /> </p>
         <!-- Nav Bar -->
         <!--
            <div class="row">
               <div class="col"><button type="button" class="btn btn-dark" onclick="getHomePage()">Home</button></div>
               <div class="col"><button type="button" class="btn btn-danger" onclick="getCoDPage()">CoD BLOPS 4</button></div>
               <div class="col"><button type="button" class="btn btn-dark" onclick="getD2Page()">Destiny 2</button></div>
               <div class="col"><button type="button" class="btn btn-dark" onclick="getFindGamePage()">Find Game</button></div>
            </div>
            -->
         <div id="HomePage">
            <div class="container">
               <h1>Welcome to my site</h1>
               <p>Here you store results from CoD Black Ops 4 matches and Destiny 2 Gambit matches</p>
               <p>Or if you want to find a game that both you and a friend have on Steam you can also do that</p>
               <p>All forms verify the values inputted to check they are possible values</p>
               <p>So no you can't input that you got 500 kills and 0 deaths in Free for All</p>
               <p>Pick a option from the nav bar above to get started</p>
            </div>
         </div>
         <!-- CoD Page -->
         <div id="CoDStats" class="container">
            <h2>Submit CoD Stats</h2>
            <p>Input stats from a Call of Duty Black Ops 4 match for a particular player</p>
            <p>Player ID must be a number, Kills, Death, Assists and Accuracy cannot exceed 100</p>
            <!-- Submit stats input fields -->
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="sendCoDPlayerID" name="sendPlayerID" placeholder="Player ID">
               </div>
               <div class="col">
               <select class="custom-select mb-3" id="sendCoDMapID" name="sendCoDMapID">
               <option selected>Map</option>
               <option value="Containers">Containers</option>
               <option value="Village">Village</option>
               <option value="Ocean Vila">Ocean Vila</option>
               </select>
               </div>
               <div class="col">
               <select class="custom-select mb-3" id="sendCoDGameModeID" name="sendCoDGameModeID">
               <option selected>Gamemode</option>
               <option value="Team Death Match">Team Death Match</option>
               <option value="Free For All">Free For All</option>
               <option value="Infected">Infected</option>
               </select>
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendCoDKills" name="sendCoDKills" placeholder="Kills">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendCoDDeaths" name="sendCoDDeaths" placeholder="Deaths">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendCoDAssists" name="sendCoDAssists" placeholder="Assists">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendCoDAccuracy" name="sendCoDAccuracy" placeholder="Accuracy">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="sendCoDStats()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="SubmitCoDResult"></h2> <!-- Displays response from server -->
            <p>  <br /> </p>
            <!-- Delete stats input field for CoD -->
            <h2>Delete CoD stats using Entry ID</h2>
            <p>Delete a match entry for using Entry ID and the authorisation code</p>
            <p>FOR TESTING: Authorisation Code = 123</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="sendCoDEntryID" name="sendCoDEntryID" placeholder="Entry ID">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendCoDAuthCode" name="sendCoDAuthCode" placeholder="Authorisation Code">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="delCoDEntry()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="DelCoDResult"></h2> <!-- Displays response from server -->
            <p>  <br /> </p>
            <!-- Search for CoD stats -->
            <h2>Search CoD stats using Player ID</h2>
            <p>Enter a player ID to retrieve all their matches or leave blank to retrieve all matches</p>
            <p>FOR TESTING: I set results for player ID 12 and 13</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="getByCoDPlayerID" name="getByPlayerID" placeholder="Player ID">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="getCoDStatsByID()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="FindCoDResult"></h2> <!-- Displays response from server -->
            <p>  <br /> </p>
            <!-- Input form -->
            <!-- Table of CoD stats -->
            <div class="container">
               <h2>CoD Stats</h2>
               <table class="table table-hover">
                  <tr>
                     <td>Entry ID</td>
                     <td>Player ID</td>
                     <td>Map ID</td>
                     <td>Game Mode ID</td>
                     <td>Kills</td>
                     <td>Deaths</td>
                     <td>Assists</td>
                     <td>Accuracy</td>
                  </tr>
               </table>
               <table id="statsTableCoD" class="table table-hover">
                  <tr>
                  </tr>
               </table>
            </div>
            <br>
            <!-- Input Field for comparing CoD game stats for two players -->
            <h2>Compare CoD player stats using Player ID</h2>
            <p>Enter two player IDs to compare their average match results</p>
            <p>FOR TESTING: I set results for players ID 12 and 13</p>
            <p>FOR TESTING: You can create your own stats using the submit and use them for comparison if you want</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="getCoDP1" name="getCoDP1" placeholder="Player 1">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="getCoDP2" name="getCoDP2" placeholder="Player 2">
               </div>
               <div class="col">
               <select class="custom-select mb-3" id="getCoDGameMode" name="getCoDGameMode">
               <option selected>Select Gamemode</option>
               <option value="Team Death Match">Team Death Match</option>
               <option value="Free For All">Free For All</option>
               <option value="Infected">Infected</option>
               </select>
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="compareCoDStats()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="ComCoDResult"></h2> <!-- Displays response from server -->
            <!-- Comparison Table -->
            <div class="container">
               <h2>CoD Stats</h2>
               <table id="comTableCoD" class="table table-hover">
                  <tr>
                     <td>Player ID</td>
                     <td>Kills</td>
                     <td>Deaths</td>
                     <td>Assists</td>
                     <td>Accuracy</td>
                  </tr>
               </table>
            </div>
         </div>
         <!-- Destiny 2 Forms -->
         <div id="D2Stats" class="container">
            <h2>Submit Destiny 2 Stats</h2>
            <p>Input stats from a Destiny 2 gambit match for a particular player</p>
            <p>Player ID must be a number, Motes Bank cannot exceed 225, Hostiles Kills and Motes Lost cannot exceed 500, Player Kills and Healed cannot exceed 100</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="sendD2PlayerID" name="sendD2PlayerID" placeholder="Player ID">
               </div>
               <div class="col">
               <select class="custom-select mb-3" id="sendD2MapID" name="sendD2MapID">
               <option selected>Map</option>
               <option value="Kell's Grave">Kell's Grave</option>
               <option value="Legion's Folly">Legion's Folly</option>
               <option value="Cathedral of Scars">Cathedral of Scars</option>
               <option value="Emerald Coast">Emerald Coast</option>
               </select>
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendMotesDeposited" name="sendMotesDeposited" placeholder="Motes Bank">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendHostilesDefeated" name="sendHostilesDefeated" placeholder="Hostile Kills">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendGuardiansDefeated" name="sendGuardiansDefeated" placeholder="Player Kills">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendMotesLost" name="sendMotesLost" placeholder="Motes Lost">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendPrimevalHealed" name="sendPrimevalHealed" placeholder="Healed">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="sendD2Stats()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="SubmitD2Result"></h2> <!-- Displays response from server -->
            <p>  <br /> </p>
            <h2>Delete Destiny 2 stats using Entry ID</h2>
            <p>Delete a match entry for using Entry ID and the authorisation code</p>
            <p>FOR TESTING: Authorisation Code = 123</p>
            <h2 id="D2delText"></h2>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="sendD2EntryID" name="sendD2EntryID" placeholder="Entry ID">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="sendD2AuthCode" name="sendD2AuthCode" placeholder="Authorization Code">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="delD2Entry()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="DelD2Result"></h2> <!-- Displays response from server -->
            <p>  <br /> </p>
            <h2>Search Destiny 2 stats using Player ID</h2>
            <p>Enter a player ID to retrieve all their matches or leave blank to retrieve all matches</p>
            <p>FOR TESTING: I set results for player ID 12 and 13</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="getByD2PlayerID" name="getByD2PlayerID" placeholder="Player ID">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="getD2StatsByID()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="FindD2Result"></h2>
            <p>  <br /> </p>
            <div class="container">
               <h2>Destiny 2 Stats</h2>
               <table class="table table-hover">
                  <tr>
                     <td>Entry ID</td>
                     <td>Player ID</td>
                     <td>Map ID</td>
                     <td>Motes Deposited</td>
                     <td>Hostiles Defeated</td>
                     <td>Guardians Defeated</td>
                     <td>MotesLost</td>
                     <td>Primeval Healed</td>
                  </tr>
               </table>
               <table id="statsTableD2" class="table table-hover">
                  <tr>
                  </tr>
               </table>
            </div>
            <br>
            <h2>Compare Destiny 2 player stats using Player ID</h2>
            <p>FOR TESTING: I set results for players ID 12 and 13</p>
            <p>FOR TESTING: You can create your own stats using the submit and use them for comparison if you want</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="getD2P1" name="getD2P1" placeholder="Player 1">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="getD2P2" name="getD2P2" placeholder="Player 2">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="compareD2Stats()">Submit</button>
               </div>
               </form>
            </div>
            <h2 id="ComD2Result"></h2> <!-- Displays response from server -->
            <div class="container">
               <h2>Destiny 2 Stats</h2>
               <table id="comTableD2" class="table table-hover">
                  <tr>
                     <td>Player ID</td>
                     <td>Motes Deposited</td>
                     <td>Hostiles Defeated</td>
                     <td>Guardians Defeated</td>
                     <td>MotesLost</td>
                     <td>Primeval Healed</td>
                  </tr>
               </table>
            </div>
         </div>
         <!-- Find Games Page-->
         <div id="FindGamePage" class="container">
            <h2>Steam Friends</h2>
            <p>Enter a Steam ID to retrieve a list of all their friends</p>
            <p>FOR TESTING: You can use my Steam ID: 76561198058093131 but any Steam ID will work</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="getSteamID" name="getSteamID" placeholder="Steam ID">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="findFriends()">Search</button>
               <!--<button type="button" class="btn btn-primary" id="compareGames">Search</button>-->
               </div>
               </form>
            </div>
            <h2 id="FriendsSteam"></h2>
            <div class="container">
               <h2>Friends List</h2>
               <table class="table table-hover">
                  <tr>
                     <td>Steam Name</td>
                     <td>Steam ID</td>
                  </tr>
               </table>
               <table id="friendsTable" class="table table-hover">
                  <tr>
                  </tr>
               </table>
            </div>
            <h2>Find matching games</h2>
            <p>Enter 2 Steam IDs to get a list of games both IDs have</p>
            <p>FOR TESTING: Use my Steam ID: 76561198058093131 and 76561197983520575 but any valid Steam IDs will work</p>
            <div class="row">
               <div class="col">
                  <form>
                     <input type="text" class="form-control" id="getFGP1" name="getFGP1" placeholder="Steam ID 1">
               </div>
               <div class="col">
               <input type="text" class="form-control" id="getFGP2" name="getFGP2" placeholder="Steam ID 2">
               </div>
               <div class="col">
               <button type="button" class="btn btn-primary" id="hashButton" onclick="compareGames()">Search</button>
               <!--<button type="button" class="btn btn-primary" id="compareGames">Search</button>-->
               </div>
               </form>
            </div>
            <h2 id="CompareSteam"></h2> <!-- Displays response from server -->
            <div class="container">
               <h2>Matching Games</h2>
               <table id="matchGameTable" class="table table-hover">
                  <tr>
                     <!--<td>Game Name</td>-->
                  </tr>
               </table>
            </div>
         </div>
      </div>
      </div>
   </body>
</html>
